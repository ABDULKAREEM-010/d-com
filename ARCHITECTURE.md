# Application Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                    E-COMMERCE APPLICATION                            │
│                     (React + Supabase)                               │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                        AUTHENTICATION                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │
│  │ Email/Pass   │  │ Google OAuth │  │ Role Check   │              │
│  └──────────────┘  └──────────────┘  └──────────────┘              │
│           │                │                  │                      │
│           └────────────────┴──────────────────┘                      │
│                            │                                         │
│                    ┌───────▼───────┐                                │
│                    │  AuthContext  │                                │
│                    └───────────────┘                                │
└─────────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │                   │
         ┌──────────▼──────────┐  ┌────▼─────────────┐
         │   ADMIN PANEL       │  │   USER PANEL     │
         │   (role: admin)     │  │   (role: user)   │
         └─────────────────────┘  └──────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                          ADMIN PANEL                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌──────────────────────────────────────────────────────────┐       │
│  │  Admin Layout (Navbar + Sidebar)                         │       │
│  └──────────────────────────────────────────────────────────┘       │
│                          │                                           │
│        ┌─────────────────┼─────────────────┐                        │
│        │                 │                 │                        │
│  ┌─────▼──────┐  ┌──────▼──────┐  ┌──────▼──────┐                 │
│  │ Dashboard  │  │  Products   │  │   Orders    │                 │
│  │            │  │             │  │             │                 │
│  │ • Stats    │  │ • Add       │  │ • View All  │                 │
│  │ • Revenue  │  │ • Edit      │  │ • Update    │                 │
│  │ • Orders   │  │ • Delete    │  │   Status    │                 │
│  └────────────┘  └─────────────┘  └─────────────┘                 │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                          USER PANEL                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌──────────────────────────────────────────────────────────┐       │
│  │  User Layout (Navbar with Cart Badge)                    │       │
│  └──────────────────────────────────────────────────────────┘       │
│                          │                                           │
│        ┌─────────────────┼─────────────────────────┐                │
│        │                 │                         │                │
│  ┌─────▼──────┐  ┌──────▼──────┐  ┌──────▼────────┐               │
│  │ Dashboard  │  │  Products   │  │  Shopping     │               │
│  │            │  │             │  │               │               │
│  │ • Profile  │  │ • Browse    │  │ • Cart        │               │
│  │ • Orders   │  │ • Details   │  │ • Checkout    │               │
│  │ • Stats    │  │ • Add Cart  │  │ • PayPal      │               │
│  └────────────┘  └─────────────┘  └───────────────┘               │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                       STATE MANAGEMENT                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌─────────────────┐         ┌─────────────────┐                   │
│  │  AuthContext    │         │  CartContext    │                   │
│  │                 │         │                 │                   │
│  │ • session       │         │ • cartItems     │                   │
│  │ • signUp        │         │ • addToCart     │                   │
│  │ • signIn        │         │ • removeFromCart│                   │
│  │ • signOut       │         │ • updateQty     │                   │
│  │                 │         │ • getTotal      │                   │
│  └─────────────────┘         └─────────────────┘                   │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                      BACKEND (SUPABASE)                              │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌─────────────────────────────────────────────────────┐            │
│  │             AUTHENTICATION                          │            │
│  │  • Email/Password  • Google OAuth  • JWT Tokens    │            │
│  └─────────────────────────────────────────────────────┘            │
│                          │                                           │
│  ┌───────────┬──────────┴──────────┬──────────┬──────────┐         │
│  │           │                     │          │          │         │
│  │  ┌────────▼────────┐  ┌────────▼───────┐  │          │         │
│  │  │    profiles     │  │   products     │  │          │         │
│  │  │                 │  │                │  │          │         │
│  │  │ • id (UUID)     │  │ • id           │  │          │         │
│  │  │ • email         │  │ • name         │  │          │         │
│  │  │ • role          │  │ • price        │  │          │         │
│  │  │ • created_at    │  │ • stock        │  │          │         │
│  │  └─────────────────┘  │ • image_url    │  │          │         │
│  │                       │ • category     │  │          │         │
│  │                       └────────────────┘  │          │         │
│  │                                            │          │         │
│  │  ┌─────────────────┐  ┌────────────────┐ │          │         │
│  │  │     orders      │  │  order_items   │ │          │         │
│  │  │                 │  │                │ │          │         │
│  │  │ • id            │──│ • order_id     │ │          │         │
│  │  │ • user_id       │  │ • product_id   │ │          │         │
│  │  │ • total_amount  │  │ • quantity     │ │          │         │
│  │  │ • status        │  │ • price        │ │          │         │
│  │  │ • payment_...   │  └────────────────┘ │          │         │
│  │  └─────────────────┘                     │          │         │
│  │                                           │          │         │
│  │  ┌──────────────────────────────────────┐│          │         │
│  │  │         STORAGE                      ││          │         │
│  │  │  • product_img bucket (public)       ││          │         │
│  │  └──────────────────────────────────────┘│          │         │
│  │                                           │          │         │
│  │  ┌──────────────────────────────────────┐│          │         │
│  │  │    ROW LEVEL SECURITY (RLS)          ││          │         │
│  │  │  • Role-based access                 ││          │         │
│  │  │  • User owns data policies           ││          │         │
│  │  │  • Admin full access                 ││          │         │
│  │  └──────────────────────────────────────┘│          │         │
│  └────────────────────────────────────────────┘         │         │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                    EXTERNAL INTEGRATIONS                             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌─────────────────────┐              ┌──────────────────────┐      │
│  │   PAYPAL SDK        │              │   GOOGLE OAUTH       │      │
│  │                     │              │                      │      │
│  │ • Client ID         │              │ • OAuth 2.0          │      │
│  │ • Payment Buttons   │              │ • Redirect Flow      │      │
│  │ • Order Creation    │              │ • User Info          │      │
│  │ • Capture Payment   │              │                      │      │
│  └─────────────────────┘              └──────────────────────┘      │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                        DATA FLOW                                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  USER SHOPPING FLOW:                                                 │
│  ┌────────┐  ┌──────────┐  ┌──────┐  ┌──────────┐  ┌────────┐     │
│  │ Browse │→ │ Product  │→ │ Cart │→ │ Checkout │→ │ Order  │     │
│  │ Items  │  │ Details  │  │      │  │ + PayPal │  │ Placed │     │
│  └────────┘  └──────────┘  └──────┘  └──────────┘  └────────┘     │
│                                                                       │
│  ADMIN MANAGEMENT FLOW:                                              │
│  ┌─────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
│  │ Add     │→ │ Manage   │→ │ View     │→ │ Update   │            │
│  │ Product │  │ Products │  │ Orders   │  │ Status   │            │
│  └─────────┘  └──────────┘  └──────────┘  └──────────┘            │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                     ROUTING STRUCTURE                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  PUBLIC ROUTES                                                        │
│  ├─ /                  (Landing/Sign In)                            │
│  ├─ /signup            (User Registration)                          │
│  └─ /signin            (User Login)                                 │
│                                                                       │
│  USER ROUTES (PrivateRoute)                                          │
│  └─ UserLayout                                                       │
│      ├─ /dashboard           (User Dashboard)                       │
│      ├─ /productlist         (Browse Products)                      │
│      ├─ /product/:id         (Product Details)                      │
│      ├─ /cart                (Shopping Cart)                        │
│      └─ /checkout            (Payment & Checkout)                   │
│                                                                       │
│  ADMIN ROUTES (AdminRoute)                                           │
│  └─ AdminLayout                                                      │
│      ├─ /admindashboard      (Admin Dashboard)                      │
│      ├─ /addproduct          (Add Product)                          │
│      ├─ /admin/products      (Manage Products)                      │
│      └─ /admin/orders        (Manage Orders)                        │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                    SECURITY LAYERS                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  Layer 1: Authentication                                             │
│  ├─ Supabase Auth (JWT tokens)                                      │
│  └─ Session management                                               │
│                                                                       │
│  Layer 2: Route Protection                                           │
│  ├─ PrivateRoute (authenticated users only)                         │
│  └─ AdminRoute (admin role only)                                    │
│                                                                       │
│  Layer 3: Database Security                                          │
│  ├─ Row Level Security (RLS)                                        │
│  ├─ Role-based policies                                             │
│  └─ Foreign key constraints                                          │
│                                                                       │
│  Layer 4: Data Validation                                            │
│  ├─ Form validation                                                  │
│  ├─ Check constraints                                                │
│  └─ Type checking                                                    │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘


┌─────────────────────────────────────────────────────────────────────┐
│                    KEY FEATURES                                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ✅ Full authentication system                                      │
│  ✅ Role-based access control                                       │
│  ✅ Product CRUD operations                                         │
│  ✅ Shopping cart with persistence                                  │
│  ✅ PayPal payment integration                                      │
│  ✅ Order management system                                         │
│  ✅ Admin dashboard with analytics                                  │
│  ✅ User dashboard with order history                               │
│  ✅ Responsive design                                               │
│  ✅ Image upload to cloud storage                                   │
│  ✅ Real-time data synchronization                                  │
│  ✅ Error handling and validation                                   │
│                                                                       │
└─────────────────────────────────────────────────────────────────────┘
```
